---
title: Bitcoin Example

services:
  - name: bitcoin-client
    service: websocket-client
    host: api.bitfinex.com
    port: 443
    target: /ws/2
    ssl: true

pipelines:
  - name: jq-pipeline
    pipeline: jq
    source: bitcoin-client
    event: data
    script: "{ paaayload: (.) }"
  - name: inja-pipeline
    pipeline: inja
    source: jq-pipeline
    event: data
    template: |
      Hello World {{ payload }}
    
endpoints:
  - name: subscribe
    source: bitcoin-client
    event: connected
    data: '{ "event": "subscribe", "channel": "ticker", "pair": "BTCUSD" }'
  - name: terminate
    source: inja-pipeline
    event: data
  
